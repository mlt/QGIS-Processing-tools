<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>QGIS processing tools</title>
  <link href="http://mlt.github.io/QGIS-Processing-toolsindex.xml" rel="self" />
  <link href="http://mlt.github.io/QGIS-Processing-tools"/>
  <updated>2015-03-19T02:52:51Z</updated>
  <id>http://mlt.github.io/QGIS-Processing-toolsindex.xml</id>
  <entry><title type="html">On effect of curvature multiplier</title><author><name>nil</name></author><link href="http://mlt.github.io/QGIS-Processing-tools/posts/2015/03/on-effect-of-curvature-multiplier/index.html"/><updated>2015-03-18T23:13:00Z</updated><published>2015-03-18T23:13:00Z</published><id>posts/2015/03/on-effect-of-curvature-multiplier/index.html</id><category scheme="/tags/dtw.html" term="dtw" label="dtw"/><category scheme="/tags/r.html" term="r" label="r"/><content type="html">&lt;p&gt;
DTW alignment of original &amp;amp; final channel centerlines is performed
using Euclidean distance matrix for corresponding spline points augmented with the
third dimension of curvature at those points. That is for each point
&lt;i&gt;q&lt;/i&gt; of original centerline and point &lt;i&gt;p&lt;/i&gt; of final centerline, the
matrix of following distances is computed.
&lt;/p&gt;

&lt;p&gt;
\[ d(q,p)=\sqrt{(x_q-x_p)^2 + (y_q-y_p)^2 + \lambda^2(c_q-c_p)^2} \]
&lt;/p&gt;

&lt;p&gt;
, where &amp;lambda; is a &lt;i&gt;Curvature multiplier&lt;/i&gt; parameter.
&lt;/p&gt;

&lt;p&gt;
Since curvature varies a little compared to spatial coordinates
between channel centerlines, we use such multiplier. The following
example demonstrates its impact.
&lt;/p&gt;

&lt;div class="org-src-container"&gt;

&lt;pre class="src src-R" id="multiplier"&gt;&lt;span class="org-constant"&gt;library&lt;/span&gt;(rgdal)
Original &lt;span class="org-constant"&gt;&amp;lt;-&lt;/span&gt; readOGR(&lt;span class="org-string"&gt;".."&lt;/span&gt;, &lt;span class="org-string"&gt;"lower_mn_1938"&lt;/span&gt;)
Final &lt;span class="org-constant"&gt;&amp;lt;-&lt;/span&gt; readOGR(&lt;span class="org-string"&gt;".."&lt;/span&gt;, &lt;span class="org-string"&gt;"lower_mn_2009"&lt;/span&gt;)
Years &lt;span class="org-constant"&gt;&amp;lt;-&lt;/span&gt; 71
spar &lt;span class="org-constant"&gt;&amp;lt;-&lt;/span&gt; 0.4
Step_pattern &lt;span class="org-constant"&gt;&amp;lt;-&lt;/span&gt; &lt;span class="org-string"&gt;'symmetricP05'&lt;/span&gt;
Curvature_multiplier &lt;span class="org-constant"&gt;&amp;lt;-&lt;/span&gt; 1e5
Step &lt;span class="org-constant"&gt;&amp;lt;-&lt;/span&gt; 25
&lt;span class="org-constant"&gt;source&lt;/span&gt;(&lt;span class="org-string"&gt;'~/.qgis2/processing/rscripts/Channel migration.rsx'&lt;/span&gt;)
&lt;span class="org-function-name"&gt;plotResult&lt;/span&gt; &lt;span class="org-constant"&gt;&amp;lt;-&lt;/span&gt; &lt;span class="org-keyword"&gt;function&lt;/span&gt;() {
  zz &lt;span class="org-constant"&gt;&amp;lt;-&lt;/span&gt; subset(Migration, .35 &amp;lt; fr_from &amp;amp; fr_from &amp;lt; .39, drop=&lt;span class="org-type"&gt;TRUE&lt;/span&gt;)
  plot(Original, xlim=bbox(zz)[&lt;span class="org-string"&gt;'x'&lt;/span&gt;,], ylim=bbox(zz)[&lt;span class="org-string"&gt;'y'&lt;/span&gt;,], col=&lt;span class="org-string"&gt;'red'&lt;/span&gt;)
  lines(Final, col=&lt;span class="org-string"&gt;'green'&lt;/span&gt;)
  &lt;span class="org-keyword"&gt;for&lt;/span&gt;(l &lt;span class="org-keyword"&gt;in&lt;/span&gt; coordinates(zz)[seq(1,length(zz),6)])
    do.call(&lt;span class="org-string"&gt;'arrows'&lt;/span&gt;, c(as.list(t(l[[1]])), length=.05, col=&lt;span class="org-string"&gt;'grey60'&lt;/span&gt;))
  grid(); axis(1); axis(2)
}
layout(matrix(1:2, nrow=1))
plotResult(); title(&lt;span class="org-string"&gt;'a)'&lt;/span&gt;)
Curvature_multiplier &lt;span class="org-constant"&gt;&amp;lt;-&lt;/span&gt; 0
&lt;span class="org-constant"&gt;source&lt;/span&gt;(&lt;span class="org-string"&gt;'~/.qgis2/processing/rscripts/Channel migration.rsx'&lt;/span&gt;)
plotResult(); title(&lt;span class="org-string"&gt;'b)'&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;


&lt;div class="figure"&gt;
&lt;p&gt;&lt;img src="../../../.././posts/2015/03/on-effect-of-curvature-multiplier/index/multiplier-effect.svg" alt="multiplier-effect.svg" /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;span class="figure-number"&gt;Figure 1:&lt;/span&gt; Migration of a section of Minnesota River a) with curvature b) spatial proximity only&lt;/p&gt;
&lt;/div&gt;
</content></entry>
</feed>
